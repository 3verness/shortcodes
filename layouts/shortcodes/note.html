{{/* Available note types: default, primary, success, info, warning, danger */}}
{{- $noticeType := .Get 0 -}}
{{/* Workaround markdownify inconsistency for single/multiple paragraphs */}}
{{- $raw := (markdownify .Inner | chomp) -}}
{{- $block := findRE "(?is)^<(?:address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h(?:1|2|3|4|5|6)|header|hgroup|hr|li|main|nav|noscript|ol|output|p|pre|section|table|tfoot|ul|video)\\b" $raw 1 -}}
{{/* Count how many times we've called this shortcode and load the css if it's the first time */}}
{{- if not ($.Page.Scratch.Get "noticeCount") -}}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css">
<style type="text/css">
    .note::before {
        display: inline-block;
        font-weight: 600;
        font-style: normal;
        font-variant: normal;
        font-family: "Font Awesome 5 Free";
        text-rendering: auto;
        -webkit-font-smoothing: antialiased
    }

    .note {
        position: relative;
        margin: 0 0 1rem;
        padding: 15px;
        border: initial;
        color: var(--color-contrast-higher);
        border-left: 5px solid #eee;
        background-color: #f9f9f9;
        border-radius: 5px
    }

    .note h2,
    .note h3,
    .note h4,
    .note h5,
    .note h6 {
        margin-top: 3px;
        margin-bottom: 0;
        padding-top: 0 !important;
        border-bottom: initial
    }

    .note blockquote:first-child,
    .note img:first-child,
    .note ol:first-child,
    .note p:first-child,
    .note pre:first-child,
    .note table:first-child,
    .note ul:first-child {
        margin-top: 0 !important
    }

    .note blockquote:last-child,
    .note img:last-child,
    .note ol:last-child,
    .note p:last-child,
    .note pre:last-child,
    .note table:last-child,
    .note ul:last-child {
        margin-bottom: 0 !important
    }

    .note {
        padding-left: 45px;
        background: var(--color-contrast-bg)
    }

    .note:hover {
        background: var(--color-contrast-lower)
    }

    .note::before {
        position: absolute;
        top: 16px;
        left: 15px;
        font-size: larger
    }

    .note.default {
        border-left-color: #BDC0BA
    }

    .note.default h2,
    .note.default h3,
    .note.default h4,
    .note.default h5,
    .note.default h6 {
        color: #BDC0BA
    }

    .note.default::before {
        content: "\f0a9";
        color: #BDC0BA
    }

    .note.primary {
        border-left-color: #8A6BBE
    }

    .note.primary h2,
    .note.primary h3,
    .note.primary h4,
    .note.primary h5,
    .note.primary h6 {
        color: #8A6BBE
    }

    .note.primary::before {
        content: "\f055";
        color: #8A6BBE
    }

    .note.info {
        border-left-color: #7DB9DE
    }

    .note.info h2,
    .note.info h3,
    .note.info h4,
    .note.info h5,
    .note.info h6 {
        color: #7DB9DE
    }

    .note.info::before {
        content: "\f05a";
        color: #7DB9DE
    }

    .note.success {
        border-left-color: #5DAC81
    }

    .note.success h2,
    .note.success h3,
    .note.success h4,
    .note.success h5,
    .note.success h6 {
        color: #5DAC81
    }

    .note.success::before {
        content: "\f058";
        color: #5DAC81
    }

    .note.warning {
        border-left-color: #FB966E
    }

    .note.warning h2,
    .note.warning h3,
    .note.warning h4,
    .note.warning h5,
    .note.warning h6 {
        color: #FB966E
    }

    .note.warning::before {
        content: "\f06a";
        color: #FB966E
    }

    .note.danger {
        border-left-color: #DB4D6D
    }

    .note.danger h2,
    .note.danger h3,
    .note.danger h4,
    .note.danger h5,
    .note.danger h6 {
        color: #DB4D6D
    }

    .note.danger::before {
        content: "\f056";
        color: #DB4D6D
    }
</style>
{{- end -}}
{{- $.Page.Scratch.Add "noticeCount" 1 -}}
<div class="note {{ $noticeType }}">
    {{- if or $block (not $raw) }}{{ $raw }}{{ else }}<p>{{ $raw }}</p>{{ end -}}
</div>